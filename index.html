<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amit Store - Premium Stationary</title>
    <style>
        /* --- CSS STYLES --- */
        :root {
            --primary-color: #ff9f43; /* Pencil Orange */
            --secondary-color: #2f3542; /* Dark Slate */
            --accent-color: #576574;
            --bg-color: #f1f2f6;
            --white: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Navigation */
        nav {
            background-color: var(--secondary-color);
            color: var(--white);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .nav-links {
            list-style: none;
            display: flex;
            gap: 20px;
        }

        .nav-links li a {
            color: var(--white);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            cursor: pointer;
        }

        .nav-links li a:hover, .nav-links li a.active {
            color: var(--primary-color);
        }

        .btn-login {
            background-color: var(--primary-color);
            padding: 8px 20px;
            border-radius: 5px;
            color: var(--secondary-color) !important;
            font-weight: bold !important;
        }

        /* Main Content Area */
        main {
            flex: 1;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .section {
            display: none; /* Hidden by default */
            animation: fadeIn 0.5s;
        }

        .section.active {
            display: block; /* Show if active */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Home Section */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1513542789411-b6a5d4f31634?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-position: center;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 2rem;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .about-shop {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin-top: 3rem;
            line-height: 1.6;
        }

        .about-shop h2 {
            color: var(--secondary-color);
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 2rem;
        }

        .about-shop p {
            margin-bottom: 1.5rem;
            color: #555;
            font-size: 1.1rem;
        }

        .shop-highlights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 2rem 0;
        }

        .highlight-item {
            background: var(--bg-color);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid var(--primary-color);
        }

        .highlight-item h4 {
            color: var(--secondary-color);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .highlight-item p {
            color: #666;
            font-size: 0.95rem;
            margin: 0;
        }

        .about-shop em {
            display: block;
            text-align: center;
            font-size: 1.2rem;
            color: var(--primary-color);
            font-style: italic;
            margin-top: 2rem;
            padding: 1rem;
            background: var(--bg-color);
            border-radius: 5px;
        }

        /* Products Section */
        .filters {
            margin-bottom: 20px;
            text-align: center;
        }

        .filter-btn {
            padding: 8px 15px;
            margin: 0 5px;
            border: none;
            background: var(--secondary-color);
            color: white;
            border-radius: 20px;
            cursor: pointer;
        }

        .filter-btn:hover {
            background: var(--primary-color);
            color: var(--secondary-color);
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .product-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: transform 0.2s;
        }

        .product-card:hover {
            transform: scale(1.03);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .product-price {
            color: var(--primary-color);
            font-weight: bold;
            font-size: 1.1rem;
            margin: 10px 0;
        }

        /* About Section */
        .about-container {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        .owner-details {
            background: linear-gradient(135deg, var(--bg-color) 0%, #f8f9fa 100%);
            border: 2px solid var(--primary-color);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(255, 159, 67, 0.2);
        }

        .owner-details h3 {
            color: var(--secondary-color);
            margin-bottom: 15px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .owner-details p {
            color: var(--secondary-color);
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0;
            line-height: 1.4;
        }

        .contact-info h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .contact-info p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        /* Login Section */
        .login-container {
            max-width: 400px;
            margin: 50px auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--secondary-color);
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .submit-btn {
            width: 100%;
            padding: 10px;
            background: var(--primary-color);
            border: none;
            color: var(--secondary-color);
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
        }

        /* Footer */
        footer {
            background-color: var(--secondary-color);
            color: var(--white);
            text-align: center;
            padding: 1.5rem;
            margin-top: auto;
        }

        /* Added: Dashboard styles */
        .dashboard-container {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .profile-info {
            margin-bottom: 20px;
        }
        
        .profile-info h2 {
            color: var(--secondary-color);
        }
        
        .profile-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .profile-actions button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .logout-btn {
            background: #e74c3c;
            color: white;
        }
        
        /* Added: Profile nav styles */
        .profile-nav {
            display: none; /* Hidden by default */
            align-items: center;
            gap: 10px;
        }
        
        .profile-nav.active {
            display: flex;
        }
        
        .profile-icon {
            font-size: 1.5rem;
        }
        
        .username {
            font-weight: bold;
            color: var(--primary-color);
        }
    </style>
</head>
<body>

    <nav>
        <div class="logo">Amit Store ‚úèÔ∏è</div>
        <ul class="nav-links">
            <li><a onclick="showPage('home')" class="active" id="link-home">Home</a></li>
            <li><a onclick="showPage('products')" id="link-products">Products</a></li>
            <li><a onclick="showPage('about')" id="link-about">About Us</a></li>
            <li><a onclick="showPage('cart')" id="link-cart">Cart (<span id="cart-count">0</span>)</a></li>
            <li><a onclick="showPage('login')" class="btn-login" id="link-login">Log In</a></li>
            <!-- Added: Profile nav item -->
            <li class="profile-nav" id="profile-nav">
                <span class="profile-icon" onclick="showPage('dashboard')">üë§</span>
                <span class="username" id="nav-username"></span>
            </li>
        </ul>
    </nav>

    <main>
        
        <section id="home" class="section active">
            <div class="hero">
                <div>
                    <h1>Welcome to Amit Store</h1>
                    <p>Your creativity starts here.</p>
                </div>
            </div>
            
            <h2 style="text-align:center; margin-bottom: 20px;">Why Shop With Us?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <h3>Huge Variety</h3>
                    <p>From office supplies to school essentials.</p>
                </div>
                <div class="feature-card">
                    <h3>Best Prices</h3>
                    <p>Wholesale rates for retail customers.</p>
                </div>
                <div class="feature-card">
                    <h3>Quality Brands</h3>
                    <p>We only stock trusted stationary brands.</p>
                </div>
            </div>
            
            <div class="about-shop">
                <h2>About Amit Store</h2>
                <p>Welcome to <strong>Amit Store</strong>, your premier destination for premium stationery and office supplies. Established with a passion for quality and creativity, we have been serving students, professionals, and creative minds for years with an extensive collection of stationery products that inspire imagination and productivity.</p>
                
                <p>Our carefully curated selection includes everything from fine writing instruments and notebooks to art supplies and office essentials. We understand that the right tools can make all the difference in your work, studies, or creative projects, which is why we partner with renowned brands to bring you only the highest quality products at competitive prices.</p>
                
                <div class="shop-highlights">
                    <div class="highlight-item">
                        <h4>‚ú® Premium Quality</h4>
                        <p>We source products from trusted manufacturers ensuring durability and excellence in every item.</p>
                    </div>
                    <div class="highlight-item">
                        <h4>üöö Fast Delivery</h4>
                        <p>Quick and reliable shipping across India with secure packaging to protect your purchases.</p>
                    </div>
                    <div class="highlight-item">
                        <h4>üí¨ Expert Support</h4>
                        <p>Our knowledgeable team is here to help you find the perfect stationery for your needs.</p>
                    </div>
                    <div class="highlight-item">
                        <h4>üîÑ Easy Returns</h4>
                        <p>Not satisfied? We offer hassle-free returns within 30 days of purchase.</p>
                    </div>
                </div>
                
                <p>Whether you're a student preparing for exams, an artist seeking inspiration, a professional organizing your workspace, or simply someone who appreciates the joy of writing with a perfect pen, Amit Store is your trusted partner in stationery excellence. Join thousands of satisfied customers who choose us for their stationery needs.</p>
                
                <p><em>"Your creativity deserves the best tools ‚Äì that's our promise at Amit Store."</em></p>
            </div>
        </section>

        <section id="products" class="section">
            <h2 style="margin-bottom: 20px;">Our Collection</h2>
            
            <div class="filters">
                <button class="filter-btn" onclick="renderProducts('all')">All</button>
                <button class="filter-btn" onclick="renderProducts('Writing')">Writing</button>
                <button class="filter-btn" onclick="renderProducts('Paper')">Paper</button>
                <button class="filter-btn" onclick="renderProducts('Art')">Art</button>
                <button class="filter-btn" onclick="renderProducts('Office')">Office</button>
            </div>

            <div id="product-list" class="product-grid">
                </div>
        </section>

        <!-- Added: Cart Section -->
        <section id="cart" class="section">
            <div class="login-container">
                <h2 style="text-align:center; margin-bottom: 16px;">Your Cart</h2>
                <div id="cart-items" style="max-height:300px; overflow:auto; margin-bottom:12px;"></div>
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                    <strong>Total:</strong>
                    <div id="cart-total" style="font-size:1.1rem; color:var(--primary-color); font-weight:bold;">‚Çπ0</div>
                </div>
                <div style="display:flex; gap:10px;">
                    <button onclick="checkout()" class="submit-btn" style="flex:1;">Checkout</button>
                    <button onclick="clearCart()" style="flex:1; background:transparent; border:1px solid #ccc; border-radius:5px;">Clear</button>
                </div>
            </div>
        </section>

        <!-- Checkout Section -->
        <section id="checkout" class="section">
            <div class="login-container">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                    <button onclick="showPage('cart')" style="background:#666; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer;">‚Üê Back to Cart</button>
                    <h2 style="margin:0;">Checkout</h2>
                    <div></div>
                </div>
                <form id="checkout-form">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" name="name" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" name="email" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" name="phone" placeholder="Enter your phone number" required>
                    </div>
                    <div class="form-group">
                        <label>Delivery Address</label>
                        <textarea name="address" placeholder="Enter your full delivery address" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>City</label>
                        <input type="text" name="city" placeholder="Enter your city" required>
                    </div>
                    <div class="form-group">
                        <label>State</label>
                        <input type="text" name="state" placeholder="Enter your state" required>
                    </div>
                    <div class="form-group">
                        <label>PIN Code</label>
                        <input type="text" name="pincode" placeholder="Enter your PIN code" required>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <strong>Order Summary:</strong><br>
                        <div id="checkout-items" style="max-height:150px; overflow:auto; margin:10px 0; padding:10px; background:#f9f9f9; border-radius:5px;"></div>
                        <div style="display:flex; justify-content:space-between;">
                            <strong>Total:</strong>
                            <div id="checkout-total" style="color:var(--primary-color); font-weight:bold;"></div>
                        </div>
                    </div>
                    <button type="submit" class="submit-btn" style="width:100%;">Place Order</button>
                </form>
            </div>
        </section>

        <section id="about" class="section">
            <div class="about-container">
                <h1>About Amit Store</h1>
                <p style="margin-top: 10px; font-size: 1.1rem; color: #555;">
                    Serving the Jamshedpur community with high-quality stationary for over 10 years.
                </p>
                <hr style="margin: 20px 0;">
                
                <div style="text-align: left; max-width: 500px; margin: 0 auto;">
                    <div class="owner-details">
                        <h3>üë§ Owner Details</h3>
                        <p><strong>Amit Tiwari</strong><br>
                        Proprietor, Amit Store</p>
                    </div>
                    <div class="contact-info">
                        <h3>üìç Address</h3>
                        <p><strong>Amit Store</strong><br>
                        Bajrangi Bagan Road No 5<br>
                        Near Hanuman Mandir<br>
                        <strong>Jamshedpur, Purbi Singhbhum, Jharkhand</strong> - 831002</p>
                        <br>
                        
                        <h3>üìû Contact</h3>
                        <p>Email: akshaygupta831004@gmail.com<br>
                        Phone: +91 74886 19879</p>
                        <br>
                        
                        <h3>üïí Opening Hours</h3>
                        <p>Mon - Sat: 9:00 AM - 9:00 PM<br>
                        Sunday: Closed</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="login" class="section">
            <div class="login-container">
                <h2 style="text-align:center; margin-bottom: 20px;">Customer Login</h2>
                <form id="login-form">
                    <div class="form-group">
                        <label>Username / Email</label>
                        <input type="text" name="email" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" name="password" placeholder="Enter your password" required>
                    </div>
                    <button type="submit" class="submit-btn">Login</button>
                    <p style="text-align:center; margin-top: 15px; font-size: 0.9rem;">
                        <a href="#" style="color: var(--primary-color);">Forgot Password?</a>
                    </p>

                    <!-- Added: Create account button that navigates to signup section -->
                    <p style="text-align:center; margin-top: 8px;">
                        <button type="button" onclick="showPage('signup')" style="background:transparent; border:1px solid var(--primary-color); color:var(--primary-color); padding:8px 14px; border-radius:6px; cursor:pointer;">
                            Create an account
                        </button>
                    </p>
                </form>
            </div>
        </section>

        <!-- Added: Signup Section -->
        <section id="signup" class="section">
            <div class="login-container">
                <h2 style="text-align:center; margin-bottom: 20px;">Create Account</h2>
                <form id="signup-form">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" name="name" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" name="password" placeholder="Create a password" required>
                    </div>
                    <div class="form-group">
                        <label>Confirm Password</label>
                        <input type="password" name="confirmPassword" placeholder="Confirm password" required>
                    </div>
                    <button type="submit" class="submit-btn">Sign Up</button>
                    <p style="text-align:center; margin-top: 12px; font-size:0.9rem;">
                        <button type="button" onclick="showPage('login')" style="background:transparent; border:none; color:var(--accent-color); cursor:pointer;">Already have an account? Log in</button>
                    </p>
                </form>
            </div>
        </section>

        <!-- Added: Dashboard Section -->
        <section id="dashboard" class="section">
            <div class="dashboard-container">
                <div class="profile-info">
                    <h2>Welcome back!</h2>
                    <p><strong>Name:</strong> <span id="user-name"></span></p>
                    <p><strong>Email:</strong> <span id="user-email"></span></p>
                </div>
                <div class="profile-actions">
                    <button onclick="showPage('products')" class="submit-btn">Browse Products</button>
                    <button onclick="showPage('cart')">View Cart</button>
                    <button onclick="logout()" class="logout-btn">Logout</button>
                </div>
            </div>
        </section>

    </main>

    <footer>
        <p>&copy; 2026 Amit Store, Jamshedpur. All rights reserved.</p>
    </footer>

    <script>
        // --- Cart State ---
        const cart = []; // { idx: productIndex, qty: number }

        function updateCartCount() {
            const totalCount = cart.reduce((s,i)=> s + i.qty, 0);
            document.getElementById('cart-count').textContent = totalCount;
        }

        function findCartItem(idx) {
            return cart.find(ci => ci.idx === idx);
        }

        function addToCart(idx) {
            const existing = findCartItem(idx);
            if (existing) existing.qty++;
            else cart.push({ idx, qty: 1 });
            renderCart();
            updateCartCount();
        }

        function buyNow(idx) {
            addToCart(idx);
            checkout();
        }

        function removeItem(idx) {
            const i = cart.findIndex(ci => ci.idx === idx);
            if (i > -1) cart.splice(i,1);
            renderCart();
            updateCartCount();
        }

        function changeQty(idx, delta) {
            const item = findCartItem(idx);
            if (!item) return;
            item.qty += delta;
            if (item.qty <= 0) removeItem(idx);
            renderCart();
            updateCartCount();
        }

        function clearCart() {
            cart.length = 0;
            renderCart();
            updateCartCount();
        }

        function renderCart() {
            const container = document.getElementById('cart-items');
            container.innerHTML = '';
            if (cart.length === 0) {
                container.innerHTML = '<p style="text-align:center;color:#666;">Your cart is empty.</p>';
                document.getElementById('cart-total').textContent = '‚Çπ0';
                return;
            }
            let total = 0;
            cart.forEach(ci => {
                const p = products[ci.idx];
                const lineTotal = parseInt(p.price.replace(/[^\d]/g,'')) * ci.qty;
                total += lineTotal;
                const item = document.createElement('div');
                item.style = 'display:flex; justify-content:space-between; align-items:center; padding:8px 0; border-bottom:1px solid #eee;';
                item.innerHTML = `
                    <div style="flex:1;">
                        <div style="font-weight:600;">${p.name}</div>
                        <div style="color:#777; font-size:0.9rem;">${p.category} ‚Ä¢ ${p.price} x ${ci.qty}</div>
                    </div>
                    <div style="display:flex; gap:6px; align-items:center;">
                        <button onclick="changeQty(${ci.idx}, -1)" style="padding:6px; border-radius:4px;">-</button>
                        <div>${ci.qty}</div>
                        <button onclick="changeQty(${ci.idx}, 1)" style="padding:6px; border-radius:4px;">+</button>
                        <button onclick="removeItem(${ci.idx})" style="margin-left:8px; color:#c0392b; background:transparent; border:none;">Remove</button>
                    </div>
                `;
                container.appendChild(item);
            });
            document.getElementById('cart-total').textContent = '‚Çπ' + total;
        }

        function renderCheckout() {
            const container = document.getElementById('checkout-items');
            container.innerHTML = '';
            let total = 0;
            
            cart.forEach(item => {
                const product = products[item.idx];
                const itemTotal = parseInt(product.price.replace('‚Çπ', '')) * item.qty;
                total += itemTotal;
                
                const div = document.createElement('div');
                div.style.display = 'flex';
                div.style.justifyContent = 'space-between';
                div.style.marginBottom = '5px';
                div.innerHTML = `
                    <span>${product.name} x${item.qty}</span>
                    <span>‚Çπ${itemTotal}</span>
                `;
                container.appendChild(div);
            });
            
            document.getElementById('checkout-total').textContent = '‚Çπ' + total;
        }

        function checkout() {
            if (cart.length === 0) { alert('Cart is empty.'); return; }
            renderCheckout();
            showPage('checkout');
        }

        // --- 1. Product Data (Simulating a Database) ---
        const products = [
            // Writing
            { name: "Ballpoint Pen (Blue)", category: "Writing", price: "‚Çπ10", image: "https://images.unsplash.com/photo-1585336261022-680e295ce3fe?w=200&h=200&fit=crop" },
            { name: "Gel Pen (Black)", category: "Writing", price: "‚Çπ20", image: "photo/gel pen black.webp" },
            { name: "Mechanical Pencil", category: "Writing", price: "‚Çπ45", image: "photo/mech pencil.webp" },
            { name: "Highlighter Set", category: "Writing", price: "‚Çπ150", image: "photo/high.webp" },
            { name: "Permanent Marker", category: "Writing", price: "‚Çπ25", image: "photo/permanent marker.webp" },
            { name: "Fountain Pen", category: "Writing", price: "‚Çπ250", image: "photo/fountain pen.webp" },
            
            // Paper
            { name: "A4 Notebook (100pg)", category: "Paper", price: "‚Çπ50", image: "photo/A4 Notebook.webp" },
            { name: "Spiral Diary", category: "Paper", price: "‚Çπ120", image: "photo/Spiral Diary.webp" },
            { name: "A4 Printer Paper (500)", category: "Paper", price: "‚Çπ300", image: "photo/A4 Printer Paper.webp" },
            { name: "Sticky Notes", category: "Paper", price: "‚Çπ40", image: "photo/Sticky Notes.webp" },
            { name: "Graph Book", category: "Paper", price: "‚Çπ35", image: "photo/Graph Book.webp" },

            // Art
            { name: "Water Color Set", category: "Art", price: "‚Çπ150", image: "photo/Water Color Set.webp" },
            { name: "Drawing Sketchbook", category: "Art", price: "‚Çπ90", image: "photo/Drawing Sketchbook.webp" },
            { name: "Canvas Board", category: "Art", price: "‚Çπ200", image: "photo/Canvas Board.webp" },
            { name: "Paint Brushes (Set)", category: "Art", price: "‚Çπ180", image: "photo/Paint Brushes (Set).webp" },
            { name: "Crayons (24 Pack)", category: "Art", price: "‚Çπ80", image: "photo/Crayons (24 Pack).webp" },

            // Office/School
            { name: "Geometry Box", category: "Office", price: "‚Çπ100", image: "photo/Geometry Box.webp" },
            { name: "Stapler & Pins", category: "Office", price: "‚Çπ75", image: "photo/Stapler & Pins.webp" },
            { name: "Calculator", category: "Office", price: "‚Çπ350", image: "photo/Calculator.webp" },
            { name: "File Folder", category: "Office", price: "‚Çπ20", image: "photo/File Folder.webp" },
            { name: "Scissors", category: "Office", price: "‚Çπ60", image: "photo/Scissors.webp" },
            { name: "Glue Stick", category: "Office", price: "‚Çπ30", image: "photo/Glue Stick.webp" },
        ];
 
        // --- 2. Navigation Logic ---
        function showPage(pageId) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));

            // Show specific section
            document.getElementById(pageId).classList.add('active');

            // Update nav link styling
            const links = document.querySelectorAll('.nav-links a');
            links.forEach(link => link.classList.remove('active'));
            
            // Highlight current link (if it's not the button)
            const activeLink = document.getElementById('link-' + pageId);
            if(activeLink && !activeLink.classList.contains('btn-login')) {
                activeLink.classList.add('active');
            }
        }
    
        // --- 3. Product Rendering Logic ---
        function renderProducts(category) {
            const container = document.getElementById('product-list');
            container.innerHTML = ''; // Clear current list

            // Filter products
            const filtered = category === 'all' 
                ? products 
                : products.filter(p => p.category === category);

            // Generate HTML
            filtered.forEach(product => {
                const originalIndex = products.indexOf(product);
                const card = document.createElement('div');
                card.className = 'product-card';
                card.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" style="width:100%; height:150px; object-fit:cover; border-radius:5px; margin-bottom:10px;">
                    <h3>${product.name}</h3>
                    <p style="color:gray; font-size:0.9rem;">${product.category}</p>
                    <div class="product-price">${product.price}</div>
                    <div style="display: flex; gap: 5px; margin-top: 10px;">
                        <button onclick="addToCart(${originalIndex})" style="background:var(--secondary-color); color:white; border:none; padding:5px 10px; border-radius:3px; cursor:pointer; flex: 1;">Add to Cart</button>
                        <button onclick="buyNow(${originalIndex})" style="background:var(--primary-color); color:white; border:none; padding:5px 10px; border-radius:3px; cursor:pointer; flex: 1;">Buy Now</button>
                    </div>
                `;
                container.appendChild(card);
            });
        }
 
        // Initialize products on load
        renderProducts('all');
        updateCartCount();
 
        // --- Login/Signup Handlers ---
        document.getElementById('login-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            try {
                const res = await fetch('http://localhost:3000/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await res.json();
                if (res.ok) {
                    currentUser = result.user; // Assume backend returns user object with name and email
                    updateNavAfterLogin(currentUser);
                    document.getElementById('user-name').textContent = currentUser.name;
                    document.getElementById('user-email').textContent = currentUser.email;
                    showPage('dashboard');
                } else {
                    alert(result.error);
                }
            } catch (err) {
                alert('Error logging in');
            }
        });

        document.getElementById('signup-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            if (data.password !== data.confirmPassword) {
                alert('Passwords do not match');
                return;
            }
            delete data.confirmPassword;
            try {
                const res = await fetch('http://localhost:3000/signup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await res.json();
                if (res.ok) {
                    alert(result.message);
                    showPage('login');
                } else {
                    alert(result.error);
                }
            } catch (err) {
                alert('Error creating account');
            }
        });

        document.getElementById('checkout-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            
            // Add order details
            data.orderItems = cart.map(item => ({
                product: products[item.idx].name,
                quantity: item.qty,
                price: products[item.idx].price
            }));
            data.total = document.getElementById('checkout-total').textContent;
            
            try {
                const res = await fetch('http://localhost:3000/order', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                if (res.ok) {
                    const html = await res.text();
                    document.open();
                    document.write(html);
                    document.close();
                    // This will redirect to PayU
                } else {
                    const result = await res.json();
                    alert(result.error);
                }
            } catch (err) {
                alert('Error placing order');
            }
        });

        // Added: User state
        let currentUser = null;
        
        // Added: Update nav after login
        function updateNavAfterLogin(user) {
            document.getElementById('link-login').parentElement.style.display = 'none';
            document.getElementById('profile-nav').classList.add('active');
            document.getElementById('nav-username').textContent = user.name;
        }
        
        // Added: Logout function
        function logout() {
            currentUser = null;
            document.getElementById('link-login').parentElement.style.display = 'block';
            document.getElementById('profile-nav').classList.remove('active');
            showPage('home');
        }
    </script>
</body>
</html>